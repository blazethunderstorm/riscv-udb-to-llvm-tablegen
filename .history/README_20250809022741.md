# RISC-V UDB to LLVM TableGen Converter

Automatically converts [RISC-V Unified Database (UDB)](https://github.com/riscv/riscv-unified-db) YAML files into LLVM TableGen (`.td`) files.

---

## 🚀 Quick Start

### 📦 Install Dependencies

```bash
pip3 install -r requirements.txt
```

### 🛠️ Convert YAML to TableGen

**Option 1: Convert a single YAML file**

```bash
python3 convert.py input.yaml output.td
```

**Option 2: Convert all `.yaml` files in a directory**

```bash
python3 convert.py udb_dir/ output_dir/
```

### 📄 What It Does

✨ **Benefit**: Saves you from writing repetitive `.td` files by hand.

---

## 🧪 Example

### 🔹 Input (`input.yaml`)

```yaml
kind: instruction
name: add
assembly: rd, rs1, rs2
format: 
opcodes:
  opcode: 0b0110011
  funct3: 0b000
```

### 🔹 Output (`output.td`)

```tablegen
def ADD : RISCVInst<
  (outs GPR:$rd),
  (ins GPR:$rs1, GPR:$rs2),
  "add", "$rd, $rs1, $rs2",
  []> {
  let Opcode = 0b0110011;
  let Funct3 = 0b000;
}
```

---

## 📂 Files in This Repo

| File | Description |
|------|-------------|
| `convert.py` | Main Python script that does the conversion |
| `input.yaml` | Sample UDB YAML file |
| `Makefile` | Automates conversion via `make` |
| `requirements.txt` | Python dependencies |
| `README.md` | You're reading it! |

---

## 🧰 Using the Makefile

The `Makefile` allows easy CLI use for building and cleaning.

### 🔧 Convert using Make

```bash
make convert
```

👉 Converts `input.yaml` into `output.td` using `convert.py`.

### 🧹 Clean Generated Files

```bash
make clean
```

👉 Deletes `output.td`.