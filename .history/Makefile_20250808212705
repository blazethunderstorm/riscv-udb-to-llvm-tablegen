# Makefile for RISC-V UDB to LLVM TableGen Converter

# Paths
PYTHON := python3
SCRIPT := convert.py

# Default targets (set these accordingly)
INPUT_FILE := udb/sample.yaml
OUTPUT_FILE := output/sample.td
INPUT_DIR := udb/
OUTPUT_DIR := output/

# Single file conversion
convert:
	$(PYTHON) $(SCRIPT) $(INPUT_FILE) $(OUTPUT_FILE)

# Directory conversion
convert_all:
	$(PYTHON) $(SCRIPT) $(INPUT_DIR) $(OUTPUT_DIR)

# Clean output directory
clean:
	rm -rf $(OUTPUT_FILE) $(OUTPUT_DIR)/RISCVGenerated.td

# Help message
help:
	@echo "Usage:"
	@echo "  make convert       # Convert a single YAML file to .td"
	@echo "  make convert_all   # Convert all YAML files in a directory to a single .td"
	@echo "  make clean         # Remove generated output"
